<div class="flex flex-col w-full">
  <h1
    class="absolute top-7 font-bold hidden md:block z-[50] text-xl transition-all duration-500"
    [ngClass]="ocSidebarService.isOpen() === 'show' ? ' left-80' : ' left-36'"
  >
    Community
  </h1>
  <h1
    class="flex items-center justify-between w-full pb-4 transition-all duration-500 border-b-2 md:hidden ps-4"
  >
    <span class="text-2xl font-bold">Community</span>
    <span class="py-2 px-6 font-semibold rounded-[50%] bg-mainColor3"
      >{{ membersCount }} members</span
    >
  </h1>
  <div class="flex items-center justify-center w-full my-6 md:hidden">
    <label
      class="relative flex items-center justify-center border-2 rounded-lg cursor-pointer w-52 h-52"
      [class.bg-mainColor1]="!logoImage"
    >
      <img
        [src]="logoImage"
        alt="Profile Picture"
        class="object-fill w-full h-full"
      />

      <input
        type="file"
        accept="image/*"
        (change)="onFileSelected($event)"
        class="hidden"
        id="fileUpload"
      />
      <div class="absolute rounded-md bg-subColor1 p-1.5 bottom-0 left-0">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M13.2599 3.59924L5.04985 12.2892C4.73985 12.6192 4.43985 13.2692 4.37985 13.7192L4.00985 16.9592C3.87985 18.1292 4.71985 18.9292 5.87985 18.7292L9.09985 18.1792C9.54985 18.0992 10.1799 17.7692 10.4899 17.4292L18.6999 8.73924C20.1199 7.23924 20.7599 5.52924 18.5499 3.43924C16.3499 1.36924 14.6799 2.09924 13.2599 3.59924Z"
            stroke="#78BDC4"
            stroke-width="1.5"
            stroke-miterlimit="10"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M11.8901 5.05078C12.3201 7.81078 14.5601 9.92078 17.3401 10.2008"
            stroke="#78BDC4"
            stroke-width="1.5"
            stroke-miterlimit="10"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M3 22H21"
            stroke="#78BDC4"
            stroke-width="1.5"
            stroke-miterlimit="10"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </div>
    </label>
  </div>
  <form [formGroup]="communityForm" (ngSubmit)="updateCommuinty()">
    <div
      class="flex flex-col items-center w-full lg:items-start gap-x-32 gap-y-8 lg:justify-between lg:flex-row"
    >
      <div class="flex flex-col w-full lg:w-2/3 gap-y-10">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-12">
          <div class="flex flex-col">
            <label for="ClientName" class="font-bold ps-2 text-[#002C3D4D]"
              >Community name
              <span class="font-bold text-red-600">*</span></label
            >
            <input
              type="text"
              id="ClientName"
              formControlName="ClientName"
              class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
            />
          </div>
          <div class="flex flex-col">
            <label for="FacebookLink" class="font-bold ps-2 text-[#002C3D4D]"
              >Facebook Link</label
            >
            <input
              type="text"
              id="FacebookLink"
              formControlName="FacebookLink"
              class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
            />
          </div>
        </div>
        <details>
          <summary>G-mail Account Info</summary>
          <div class="grid grid-cols-1 mt-4 gap-y-4 md:grid-cols-2 gap-x-12">
            <div class="flex flex-col">
              <label for="Gmail" class="font-bold ps-2 text-[#002C3D4D]"
                >G-mail
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <input
                type="email"
                id="Gmail"
                formControlName="Gmail"
                class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
              />
            </div>
            <div class="flex flex-col">
              <label
                for="GoogleCredentialPassword"
                class="font-bold ps-2 text-[#002C3D4D]"
                >Google Credential Password
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <input
                type="text"
                id="GoogleCredentialPassword"
                formControlName="GoogleCredentialPassword"
                class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
              />
            </div>
          </div>
        </details>
        <details>
          <summary>Codeforces settings</summary>
          <div
            class="grid mt-4"
            [ngClass]="
              isCodeforcesSettings
                ? 'md:grid-cols-2 gap-x-12 grid-rows-4 grid-cols-1 md:grid-rows-3'
                : 'grid-rows-2 grid-cols-1'
            "
          >
            <div
              class="flex items-center justify-between col-span-1 row-span-1"
              [ngClass]="
                isCodeforcesSettings ? 'w-full' : 'md:w-1/2 pe-8 w-full'
              "
            >
              <label class="font-bold ps-2 text-[#002C3D4D]"
                >Is codeforces required
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <label class="relative inline-block w-12 h-6 mt-2 cursor-pointer">
                <input
                  type="checkbox"
                  [checked]="isCodeforcesSettings"
                  (change)="toggleCheckbox()"
                  class="hidden peer"
                />
                <div
                  class="absolute top-0 left-0 w-12 h-4 transition-all rounded-full bg-mainColor2 peer-checked:bg-mainColor1"
                ></div>
                <div
                  class="absolute -top-[5px] -left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform peer-checked:translate-x-[30px]"
                ></div>
              </label>
            </div>
            @if (isCodeforcesSettings) {
            <div class="col-span-2 row-span-2 mt-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12">
                <div class="flex flex-col">
                  <label for="ApiKey" class="font-bold ps-2 text-[#002C3D4D]"
                    >Api Key
                    <span class="text-lg font-bold text-red-600">*</span></label
                  >
                  <input
                    type="text"
                    id="ApiKey"
                    formControlName="ApiKey"
                    class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
                  />
                </div>
                <div class="flex flex-col">
                  <label for="ApiSecret" class="font-bold ps-2 text-[#002C3D4D]"
                    >Api Secret
                    <span class="text-lg font-bold text-red-600">*</span></label
                  >
                  <input
                    type="text"
                    id="ApiSecret"
                    formControlName="ApiSecret"
                    class="px-4 py-2 text-lg font-semibold border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
                  />
                </div>
              </div>
            </div>
            }
            <div
              class="flex items-center justify-between col-span-1 row-span-1 mt-4"
              [ngClass]="
                isCodeforcesSettings ? 'w-full mt-8' : 'md:w-1/2 pe-8 w-full'
              "
            >
              <label class="font-bold ps-2 text-[#002C3D4D]"
                >Is Public
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <label class="relative inline-block w-12 h-6 mt-2 cursor-pointer">
                <input
                  type="checkbox"
                  formControlName="IsPublic"
                  class="hidden peer"
                />
                <div
                  class="absolute top-0 left-0 w-12 h-4 transition-all rounded-full bg-mainColor2 peer-checked:bg-mainColor1"
                ></div>
                <div
                  class="absolute -top-[5px] -left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform peer-checked:translate-x-[30px]"
                ></div>
              </label>
            </div>
          </div>
        </details>
        <details>
          <summary>Traineesâ€™ data</summary>
          <div class="grid grid-cols-1 grid-rows-2 mt-4">
            <div
              class="flex items-center justify-between w-full col-span-1 row-span-1 md:w-1/2 md:pe-8"
            >
              <label class="font-bold ps-2 text-[#002C3D4D]"
                >Required Phone Number
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <label class="relative inline-block w-12 h-6 mt-2 cursor-pointer">
                <input
                  type="checkbox"
                  formControlName="IsRequiredTraineePhoneNumber"
                  class="hidden peer"
                />
                <div
                  class="absolute top-0 left-0 w-12 h-4 transition-all rounded-full bg-mainColor2 peer-checked:bg-mainColor1"
                ></div>
                <div
                  class="absolute -top-[5px] -left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform peer-checked:translate-x-[30px]"
                ></div>
              </label>
            </div>
            <div
              class="flex items-center justify-between w-full col-span-1 row-span-1 mt-4 md:w-1/2 md:pe-8"
            >
              <label class="font-bold ps-2 text-[#002C3D4D]"
                >Required National ID
                <span class="text-lg font-bold text-red-600">*</span></label
              >
              <label class="relative inline-block w-12 h-6 mt-2 cursor-pointer">
                <input
                  type="checkbox"
                  formControlName="IsRequiredTraineeNationalId"
                  class="hidden peer"
                />
                <div
                  class="absolute top-0 left-0 w-12 h-4 transition-all rounded-full bg-mainColor2 peer-checked:bg-mainColor1"
                ></div>
                <div
                  class="absolute -top-[5px] -left-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform peer-checked:translate-x-[30px]"
                ></div>
              </label>
            </div>
          </div>
        </details>
        <details>
          <summary>Subscription</summary>
          <div class="grid grid-cols-1 mt-4 gap-y-4 md:grid-cols-2 gap-x-12">
            <div class="flex flex-col">
              <h4 class="font-bold ps-2 text-[#002C3D4D]">Start date</h4>
              <div
                class="px-4 py-2 text-lg font-semibold bg-white border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
              >
                {{ convertToLocal(startDate) | date : "dd-MM-YYYY" }}
              </div>
            </div>
            <div class="flex flex-col">
              <h4 class="font-bold ps-2 text-[#002C3D4D]">End date</h4>
              <div
                class="px-4 py-2 text-lg font-semibold bg-white border border-gray-200 outline-none appearance-none rounded-xl text-mainColor1 focus:border-subColor1"
              >
                {{ convertToLocal(endDate) | date : "dd-MM-YYYY" }}
              </div>
            </div>
          </div>
        </details>
      </div>

      <div
        class="items-center justify-center hidden w-2/3 py-6 md:flex lg:w-1/3"
      >
        <div class="flex flex-col items-center justify-center gap-y-6">
          <label
            class="relative flex items-center justify-center border-2 rounded-lg cursor-pointer w-60 h-60"
            [class.bg-mainColor1]="!logoImage"
          >
            @if (logoImage) {
            <img
              [src]="logoImage"
              alt="Profile Picture"
              class="object-fill w-full h-full"
            />
            }@else {

            <svg
              width="77"
              height="65"
              viewBox="0 0 77 65"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M76.8501 32.4895C76.8501 22.0295 68.2901 13.4595 57.8201 13.4595C57.1301 13.4595 56.44 13.5295 55.75 13.6195C51.96 5.89954 44.18 0.769531 35.63 0.769531C24.25 0.769531 15.02 9.09952 13.62 20.0695C6.21 21.4295 0.75 27.7895 0.75 35.6495C0.75 44.0695 7.01999 50.7695 15.24 51.4495C15.6 51.5895 15.99 51.6595 16.39 51.6595H26.26C28.36 51.6595 29.71 50.1595 29.51 47.9695C29.36 46.3495 27.9601 45.1195 26.3301 45.1195H16.4601C16.3301 45.1195 16.2101 45.1195 16.0901 45.1395C10.9601 44.8795 7.09009 40.8695 7.09009 35.6495C7.09009 30.4295 11.2101 26.1395 16.6001 26.1395C18.5001 26.1395 19.77 24.8695 19.77 22.9695C19.77 14.0895 26.75 7.11954 35.62 7.11954C42.6 7.11954 48.62 11.5595 50.52 18.2195C51.15 19.8095 53.06 20.7595 54.64 20.1195C54.77 20.0995 54.9 20.0695 55.02 20.0295C55.91 19.8195 56.9801 19.7995 57.8101 19.7995C64.7901 19.7995 70.49 25.5095 70.49 32.4795C70.49 39.4495 64.9901 44.9295 58.2001 45.1395C58.1201 45.1395 58.0501 45.1195 57.9701 45.1195H51.37C49.27 45.1195 47.92 46.6195 48.12 48.8095C48.27 50.4295 49.67 51.6595 51.3 51.6595H57.9C58.35 51.6595 58.77 51.5895 59.14 51.4595C68.98 50.7695 76.8301 42.4995 76.8301 32.4895H76.8501Z"
                fill="white"
                stroke="#002C3D"
                stroke-width="0.11"
                stroke-miterlimit="10"
              />
              <path
                d="M48.3097 42.0093C49.2597 42.0093 49.8996 41.6893 50.5296 41.0593C51.7996 39.7893 51.7996 37.8893 50.5296 36.6193L41.6496 27.7393C41.2096 26.2893 39.8896 25.4393 38.1196 25.5993C36.6296 25.7393 35.4897 26.9293 35.3097 28.3893L27.0697 36.6293C25.7997 37.8993 25.7997 39.7993 27.0697 41.0693C27.6997 41.6993 28.3397 42.0193 29.2897 42.0193C30.2397 42.0193 30.8796 41.6993 31.5096 41.0693L35.2696 37.3093V61.5993C35.2696 63.2293 36.4896 64.6293 38.1196 64.7793C40.3096 64.9793 41.8097 63.6293 41.8097 61.5293V36.7793L46.0997 41.0693C46.7297 41.6993 47.3697 42.0193 48.3197 42.0193L48.3097 42.0093Z"
                fill="white"
                stroke="#002C3D"
                stroke-width="0.11"
                stroke-miterlimit="10"
              />
            </svg>
            }
            <input
              type="file"
              accept="image/*"
              (change)="onFileSelected($event)"
              class="hidden"
              id="fileUpload"
            />
            <div class="absolute rounded-md bg-subColor1 p-1.5 bottom-0 left-0">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13.2599 3.59924L5.04985 12.2892C4.73985 12.6192 4.43985 13.2692 4.37985 13.7192L4.00985 16.9592C3.87985 18.1292 4.71985 18.9292 5.87985 18.7292L9.09985 18.1792C9.54985 18.0992 10.1799 17.7692 10.4899 17.4292L18.6999 8.73924C20.1199 7.23924 20.7599 5.52924 18.5499 3.43924C16.3499 1.36924 14.6799 2.09924 13.2599 3.59924Z"
                  stroke="#78BDC4"
                  stroke-width="1.5"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M11.8901 5.05078C12.3201 7.81078 14.5601 9.92078 17.3401 10.2008"
                  stroke="#78BDC4"
                  stroke-width="1.5"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M3 22H21"
                  stroke="#78BDC4"
                  stroke-width="1.5"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </div>
          </label>
          <h4
            class="flex items-center justify-center w-40 h-40 text-xl font-semibold rounded-full text-mainColor1 bg-mainColor3"
          >
            {{ membersCount }} members
          </h4>
        </div>
      </div>
    </div>

    <div
      class="flex items-center justify-end w-full mt-20 text-lg font-semibold lg:w-11/12 gap-x-6 text-mainColor4"
    >
      <button type="submit" class="px-6 py-2 rounded-md bg-mainColor1">
        @if (!isLoading) {Save}@else {
        <div class="flex items-center justify-center w-full bg-opacity-60">
          <div class="flex items-center justify-center">
            <div
              class="border-4 border-dashed rounded-full w-7 h-7 border-subColor2 animate-spin"
            ></div>
          </div>
        </div>
        }
      </button>
      <button
        type="button"
        (click)="getCommunityById()"
        class="px-6 py-2 rounded-md bg-mainColor2"
      >
        Cancel
      </button>
    </div>
  </form>
</div>
